<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book Chat - Web Component Demo</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    .container {
      max-width: 800px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 3rem;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    h1 {
      color: #667eea;
      margin-bottom: 1rem;
      font-size: 2.5rem;
    }

    h2 {
      color: #764ba2;
      margin-top: 2rem;
      margin-bottom: 1rem;
      font-size: 1.5rem;
    }

    p {
      color: #4a5568;
      line-height: 1.6;
      margin-bottom: 1rem;
    }

    .info-box {
      background: #f7fafc;
      border-left: 4px solid #667eea;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 4px;
    }

    .info-box strong {
      color: #667eea;
      display: block;
      margin-bottom: 0.5rem;
    }

    code {
      background: #2d3748;
      color: #68d391;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
      font-size: 0.9em;
    }

    .demo-controls {
      display: flex;
      gap: 1rem;
      margin: 2rem 0;
      flex-wrap: wrap;
    }

    .demo-controls input {
      flex: 1;
      padding: 0.75rem;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      font-size: 1rem;
    }

    .demo-controls button {
      padding: 0.75rem 1.5rem;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .demo-controls button:hover {
      transform: translateY(-2px);
    }

    .feature-list {
      list-style: none;
      margin: 1rem 0;
    }

    .feature-list li {
      padding: 0.5rem 0;
      color: #4a5568;
    }

    .feature-list li:before {
      content: "‚úì";
      color: #48bb78;
      font-weight: bold;
      margin-right: 0.5rem;
    }

    .warning {
      background: #fff5f5;
      border-left: 4px solid #fc8181;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 4px;
      color: #742a2a;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üìö Book Chat - Web Component</h1>
    <p>
      –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ –≤–µ–±-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —á–∞—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º 
      <code>Shadow DOM</code> –∏ <code>Socket.IO</code>.
    </p>

    <div class="info-box">
      <strong>–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</strong>
      –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É —á–∞—Ç–∞ –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É —ç–∫—Ä–∞–Ω–∞. 
      –í–µ–±-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è!
    </div>

    <h2>üéØ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏</h2>
    <ul class="feature-list">
      <li>–ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è —Å—Ç–∏–ª–µ–π —á–µ—Ä–µ–∑ Shadow DOM</li>
      <li>–†–∞–±–æ—Ç–∞–µ—Ç –≤ –ª—é–±–æ–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–µ (React, Vue, Angular) –∏–ª–∏ –±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞</li>
      <li>WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</li>
      <li>–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤</li>
      <li>–≠–ª–µ–≥–∞–Ω—Ç–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã</li>
      <li>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</li>
    </ul>

    <h2>üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º</h2>
    <div class="demo-controls">
      <input 
        type="text" 
        id="username-input" 
        placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
        value="DemoUser"
      />
      <button onclick="updateUsername()">–û–±–Ω–æ–≤–∏—Ç—å –∏–º—è</button>
    </div>

    <div class="demo-controls">
      <input 
        type="text" 
        id="ws-url-input" 
        placeholder="WebSocket URL"
        value="ws://158.160.203.172:8081"
      />
      <button onclick="updateWsUrl()">–û–±–Ω–æ–≤–∏—Ç—å URL</button>
    </div>

    <div class="warning">
      ‚ö†Ô∏è <strong>–í–Ω–∏–º–∞–Ω–∏–µ:</strong> –î–ª—è —Ä–∞–±–æ—Ç—ã —á–∞—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º –∑–∞–ø—É—â–µ–Ω–Ω—ã–π WebSocket —Å–µ—Ä–≤–µ—Ä. 
      –í production –æ–∫—Ä—É–∂–µ–Ω–∏–∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞—â–∏—â—ë–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (WSS).
    </div>

    <h2>üìù –ö–æ–¥ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</h2>
    <div class="info-box">
      <strong>HTML:</strong>
      <pre style="overflow-x: auto; padding: 1rem; background: #2d3748; color: #68d391; border-radius: 4px; margin-top: 0.5rem;"><code>&lt;book-chat 
  ws-url="ws://localhost:8081" 
  username="YourName"
  theme="dark"&gt;
&lt;/book-chat&gt;

&lt;script type="module" src="./BookChat.js"&gt;&lt;/script&gt;</code></pre>
    </div>

    <h2>üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞—Ö</h2>
    
    <div class="info-box">
      <strong>React:</strong>
      <pre style="overflow-x: auto; padding: 1rem; background: #2d3748; color: #68d391; border-radius: 4px; margin-top: 0.5rem;"><code>import './BookChat.js'

function App() {
  return &lt;book-chat ws-url="..." username="..." /&gt;
}</code></pre>
    </div>

    <div class="info-box">
      <strong>Vue:</strong>
      <pre style="overflow-x: auto; padding: 1rem; background: #2d3748; color: #68d391; border-radius: 4px; margin-top: 0.5rem;"><code>&lt;template&gt;
  &lt;book-chat :ws-url="wsUrl" :username="user" /&gt;
&lt;/template&gt;

&lt;script&gt;
import './BookChat.js'
&lt;/script&gt;</code></pre>
    </div>

    <div class="info-box">
      <strong>Vanilla JS:</strong>
      <pre style="overflow-x: auto; padding: 1rem; background: #2d3748; color: #68d391; border-radius: 4px; margin-top: 0.5rem;"><code>const chat = document.createElement('book-chat')
chat.setAttribute('ws-url', 'ws://localhost:8081')
chat.setAttribute('username', 'User')
document.body.appendChild(chat)</code></pre>
    </div>
  </div>

  <!-- –í–µ–±-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç —á–∞—Ç–∞ -->
  <book-chat id="demo-chat" ws-url="ws://158.160.203.172:8081" username="DemoUser"></book-chat>

  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤–µ–±-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ -->
  <script type="module">
    // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º Socket.IO client
    import { io } from 'https://cdn.socket.io/4.5.4/socket.io.esm.min.js'

    // –î–µ–ª–∞–µ–º io –¥–æ—Å—Ç—É–ø–Ω—ã–º –≥–ª–æ–±–∞–ª—å–Ω–æ –¥–ª—è BookChat
    window.io = io

    // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
    // –í production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–±—Ä–∞–Ω–Ω—ã–π —Ñ–∞–π–ª
    const BookChatCode = await fetch('/src/components/WebComponents/BookChat.js').then(r => r.text())
    
    // –°–æ–∑–¥–∞–µ–º –∏ –≤—ã–ø–æ–ª–Ω—è–µ–º —Å–∫—Ä–∏–ø—Ç
    const script = document.createElement('script')
    script.type = 'module'
    script.textContent = BookChatCode.replace("import { io } from 'socket.io-client'", "const io = window.io")
    document.body.appendChild(script)
  </script>

  <script>
    // –§—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º
    function updateUsername() {
      const username = document.getElementById('username-input').value
      const chat = document.getElementById('demo-chat')
      chat.setAttribute('username', username)
      alert('–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–æ! –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è.')
    }

    function updateWsUrl() {
      const wsUrl = document.getElementById('ws-url-input').value
      const chat = document.getElementById('demo-chat')
      chat.setAttribute('ws-url', wsUrl)
      alert('WebSocket URL –æ–±–Ω–æ–≤–ª—ë–Ω! –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è.')
    }

    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
    window.addEventListener('load', () => {
      console.log('üìö Book Chat Web Component Demo –∑–∞–≥—Ä—É–∂–µ–Ω')
      console.log('–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤—ã–π –Ω–∏–∂–Ω–∏–π —É–≥–æ–ª –¥–ª—è –∫–Ω–æ–ø–∫–∏ —á–∞—Ç–∞')
    })
  </script>
</body>
</html>
